---
layout: layouts/status.njk
title: GOV.UK service status
description: Current operational status of GOV.UK public services and infrastructure components
permalink: /index.html
---

{#
  Main Status Page Template

  Requirements:
  - Load _data/health.json for service status data
  - Display page generation timestamp (FR-029b: dual format)
  - Sort services: FAIL → DEGRADED → PASS → PENDING (FR-023, FR-026)
  - Flat list display (no grouping)
  - Show last update time
  - WCAG 2.2 AAA accessible (FR-029a, FR-029b)

  Data source: _data/health.json (generated by orchestrator)
  Schema: Array of ServiceStatusAPI objects per data-model.md
#}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "components/service-status.njk" import serviceStatus %}

{# Page heading with generation timestamp #}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">
        GOV.UK service status
      </h1>

      {# Page generation timestamp (dual format per FR-029b) #}
      <p class="govuk-body-l">
        Page generated:
        <time datetime="{{ health.generatedAt }}" class="govuk-!-font-weight-bold">
          {{ health.generatedAt }}
        </time>
      </p>
    </div>
  </div>

  {# Alert banner if any services are down (high visibility for incidents) #}
  {% set failedServices = health.services | selectattr("status", "equalto", "FAIL") %}
  {% if failedServices.length > 0 %}
    {% set serviceWord = "service is" if failedServices.length == 1 else "services are" %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {{ govukNotificationBanner({
          type: "important",
          titleText: "Service Alert",
          titleId: "govuk-notification-banner-title-failed",
          html: "<p class='govuk-notification-banner__heading'>" ~ failedServices.length ~ " " ~ serviceWord ~ " currently experiencing issues</p>"
        }) }}
      </div>
    </div>
  {% endif %}

  {# Success banner if all services operational #}
  {% set operationalServices = health.services | selectattr("status", "equalto", "PASS") %}
  {% if operationalServices.length == health.services.length and health.services.length > 0 %}
    {% set serviceWord = "service is" if health.services.length == 1 else "services are" %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {{ govukNotificationBanner({
          type: "success",
          titleText: "All Systems Operational",
          titleId: "govuk-notification-banner-title-success",
          html: "<p class='govuk-notification-banner__heading'>All " ~ health.services.length ~ " " ~ serviceWord ~ " operating normally</p>"
        }) }}
      </div>
    </div>
  {% endif %}

  {#
    Service list sorted by status priority (FR-023, FR-026):
    1. FAIL (down services first)
    2. DEGRADED (degraded services second)
    3. PASS (healthy services third)
    4. PENDING (not yet checked last)
  #}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      {# Failed services section #}
      {% set failedServices = health.services | selectattr("status", "equalto", "FAIL") %}
      {% if failedServices.length > 0 %}
        <section aria-labelledby="failed-services-heading">
          <h2 id="failed-services-heading" class="govuk-heading-l govuk-!-margin-top-6">
            Services experiencing issues ({{ failedServices.length }})
          </h2>

          {% for service in failedServices %}
            {{ serviceStatus({ service: service }) }}
          {% endfor %}
        </section>
      {% endif %}

      {# Degraded services section #}
      {% set degradedServices = health.services | selectattr("status", "equalto", "DEGRADED") %}
      {% if degradedServices.length > 0 %}
        <section aria-labelledby="degraded-services-heading">
          <h2 id="degraded-services-heading" class="govuk-heading-l govuk-!-margin-top-6">
            Services with degraded performance ({{ degradedServices.length }})
          </h2>

          {% for service in degradedServices %}
            {{ serviceStatus({ service: service }) }}
          {% endfor %}
        </section>
      {% endif %}

      {# Operational services section #}
      {% set operationalServices = health.services | selectattr("status", "equalto", "PASS") %}
      {% if operationalServices.length > 0 %}
        <section aria-labelledby="operational-services-heading">
          <h2 id="operational-services-heading" class="govuk-heading-l govuk-!-margin-top-6">
            Operational services ({{ operationalServices.length }})
          </h2>

          {% for service in operationalServices %}
            {{ serviceStatus({ service: service }) }}
          {% endfor %}
        </section>
      {% endif %}

      {# Pending services section (awaiting first health check) #}
      {% set pendingServices = health.services | selectattr("status", "equalto", "PENDING") %}
      {% if pendingServices.length > 0 %}
        <section aria-labelledby="pending-services-heading">
          <h2 id="pending-services-heading" class="govuk-heading-l govuk-!-margin-top-6">
            Services pending initial check ({{ pendingServices.length }})
          </h2>

          <p class="govuk-body">
            These services have been configured but have not yet been checked. The first health check will complete within the next check interval.
          </p>

          {% for service in pendingServices %}
            {{ serviceStatus({ service: service }) }}
          {% endfor %}
        </section>
      {% endif %}

      {# Empty state (no services configured) #}
      {% if health.services.length == 0 %}
        <section aria-labelledby="no-services-heading">
          <h2 id="no-services-heading" class="govuk-heading-l govuk-!-margin-top-6">
            No services configured
          </h2>

          <p class="govuk-body">
            No services are currently configured for monitoring. Add services to the <code>config.yaml</code> file to begin health checks.
          </p>
        </section>
      {% endif %}

    </div>
  </div>

  {# Footer information section #}
  <div class="govuk-grid-row govuk-!-margin-top-8">
    <div class="govuk-grid-column-full">
      <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

      <details class="govuk-details">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">
            About this status page
          </span>
        </summary>
        <div class="govuk-details__text">
          <h3 class="govuk-heading-s">How status is determined</h3>
          <ul class="govuk-list govuk-list--bullet">
            <li><strong>Down</strong> - Service validation failed or timeout exceeded</li>
            <li><strong>Degraded</strong> - Service responds but latency exceeds warning threshold</li>
            <li><strong>Operational</strong> - Service responds successfully within expected latency</li>
            <li><strong>Pending</strong> - Service awaiting initial health check</li>
          </ul>

          <h3 class="govuk-heading-s">Auto-refresh</h3>
          <p class="govuk-body">
            This page automatically refreshes every {{ settings.page_refresh or 60 }} seconds to display the latest status information. No JavaScript is required.
          </p>

          <h3 class="govuk-heading-s">Historical data</h3>
          <p class="govuk-body">
            For historical performance data and uptime calculations, access the <a href="/history.csv" class="govuk-link">CSV data export</a> or <a href="/api/status.json" class="govuk-link">JSON API</a>.
          </p>

          <h3 class="govuk-heading-s">Accessibility</h3>
          <p class="govuk-body">
            This status page is designed to meet WCAG 2.2 Level AAA accessibility standards. It uses semantic HTML, proper ARIA landmarks, and does not rely on color alone to convey status information.
          </p>
        </div>
      </details>
    </div>
  </div>
